<!DOCTYPE html>
<html>
<head>
	<title>Example of Geolocator class</title>

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
	<link rel="stylesheet" href="css/m.css" />

	<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
  <script src="../src/geolocator.js" charset="UTF-8"></script>

	<script>

		var gl = {};

	  document.addEventListener("DOMContentLoaded", function(event) {

				//var map = L.map('map').setView([52.504311, 13.427620],18);

				/*var layer = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}@2x.png', {
					attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles &copy; <a href="http://cartodb.com/attributions">CartoDB</a>, OSRM instance by <a href="//mapzen.com">Mapzen</a>'
				});

				map.addLayer(layer);*/

				var options = {
					error : {
						pmDenied: function() {
							alert("Warruuuuuum?????");
						}
					},
					callbacks: {
						isCollecting: function(pos, _this){

							document.getElementById("watching").innerHTML = "Watching " + _this.watcher.count  + ": " + Number(pos.coords.latitude).toFixed(4) + "," + Number(pos.coords.longitude).toFixed(4);
						  document.getElementById("distance").innerHTML = "Distance: " + Number(_this.moving.getDistance()).toFixed(3) + "km";
						  document.getElementById("time").innerHTML = "Time: " + Number((pos.timestamp - _this.watcher.first.timestamp)/1000).toFixed(3) + "s";
							document.getElementById("speed").innerHTML = "Speed: " + Number(_this.moving.waypoints[_this.watcher.count].speed).toFixed(3) + " km/h";
							var _bearing = document.getElementById("bearing").innerHTML;
							document.getElementById("bearing").innerHTML = _bearing + ', ' + _this.moving.waypoints[_this.watcher.count].bearing;
						}
					},
					moving: {
						callbacks : {
							isMoving: function(moving){
								document.getElementById('move').innerHTML = "Moving: (BearingMax: " + moving.getBearingMax() + " Speed: " + moving.getAveSpeed() + ")";

							},
			        isStandStill : function(moving) {
								document.getElementById('move').innerHTML = "Stand still! (BearingMax: "+ moving.getBearingMax() +" )";
							}
						}
					}
				}



				gl = new Geolocator(options);

				//gl.addWatcher(testtest);


		});

	</script>

	<style>
		body {
			padding: 0;
			margin: 0;
		}
		html, body, #map {
			height: 100%;
			width: 100%;
		}
		#map {
			position: absolute;
		}
	</style>
</head>
<body>

	<div id="map">

		<div id="controls">
			<div class="wrapper">
				<ul id="result">
					<li id="start-pos"></li>
					<li id="watching"></li>
					<li id="distance"></li>
					<li id="time"></li>
					<li id="speed" class="complete"></li>
					<li>Bearing: <span id="bearing"></span></li>
				</ul>

				<p id="move"></p>

			</div>
		</div>


	</div>

</body>
</html>